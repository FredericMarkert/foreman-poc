DHCP:	

http://projects.theforeman.org/projects/smart-proxy/wiki/Settingsyml
http://projects.theforeman.org/projects/smart-proxy/wiki/ISC_DHCP

# /etc/foreman-proxy/settings.yml

:dhcp: true
:dhcp_vendor: isc
:dhcp_config: /etc/dhcp/dhcpd.conf
:dhcp_leases: /var/lib/dhcp/dhcpd.leases


# foreman-proxy:bind
sudo usermod -a -G bind foreman-proxy

# give group bind same permissions as user bind for rndc.key
sudo chmod g+w /etc/bind/rndc.key

# create omapi key
dnssec-keygen -r /dev/urandom -a HMAC-MD5 -b 512 -n HOST omapi_key
cat Komapi_key.+*.private |grep ^Key|cut -d ' ' -f2- # XXXXXXXX


# /etc/dhcp/dhcpd.conf:

omapi-port 7911;
key omapi_key {
	algorithm HMAC-MD5;
	secret "XXXXXXXX";
};
omapi-key omapi_key;



# /etc/foreman-proxy/settings.yml

:dhcp_key_name: omapi_key
:dhcp_key_secret: XXXXXXXX

# chgrp for foreman-proxy

sudo chgrp foreman-proxy /etc/dhcp/
sudo chgrp foreman-proxy /etc/dhcp/dhcpd.conf 
 

DNS:

http://projects.theforeman.org/projects/smart-proxy/wiki/Settingsyml

# /etc/foreman-proxy/settings.yml

:dns: true
:dns_key: /etc/bind/foreman.key
:dns_server: 172.16.0.2


# dnssec key

sudo ddns-confgen -k foreman -a hmac-md5 -r /dev/urandom 

# foreman.key 

key "foreman" {
	algorithm hmac-md5;
	secret "Gs+6mgNBNOGNQBdDcfEegA==";
};

sudo chmod 660 /etc/bindforeman.key 
sudo chown bind /etc/bindforeman.key 


# /etc/bind/named.conf.local
 
        update-policy {
              grant foreman zonesub ANY;
        };

